<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EntityDB Demo</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      line-height: 1.6;
    }
    header {
      text-align: center;
      margin-bottom: 40px;
    }
    header img {
      max-width: 100%;
      height: auto;
    }
    .container {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
    }
    .panel {
      flex: 1;
      min-width: 300px;
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 20px;
      background-color: #f9f9f9;
    }
    .action-panel {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }
    textarea, input {
      width: 100%;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 4px;
      margin-top: 5px;
      font-family: inherit;
    }
    button {
      background-color: #4CAF50;
      color: white;
      border: none;
      padding: 10px 15px;
      border-radius: 4px;
      cursor: pointer;
      font-weight: bold;
    }
    button:hover {
      background-color: #45a049;
    }
    .results {
      margin-top: 20px;
      max-height: 400px;
      overflow-y: auto;
      border: 1px solid #ddd;
      border-radius: 4px;
      padding: 10px;
      background-color: white;
    }
    .result-item {
      margin-bottom: 10px;
      padding: 10px;
      border-bottom: 1px solid #eee;
    }
    .similarity {
      font-weight: bold;
      color: #4CAF50;
    }
    .tabs {
      display: flex;
      margin-bottom: 20px;
    }
    .tab {
      padding: 10px 20px;
      cursor: pointer;
      border: 1px solid #ccc;
      border-bottom: none;
      border-radius: 4px 4px 0 0;
      background-color: #f1f1f1;
    }
    .tab.active {
      background-color: white;
    }
    .tab-content {
      display: none;
      border: 1px solid #ccc;
      padding: 20px;
      border-radius: 0 0 4px 4px;
      background-color: white;
    }
    .tab-content.active {
      display: block;
    }
    code {
      font-family: 'Courier New', Courier, monospace;
      background-color: #f1f1f1;
      padding: 2px 4px;
      border-radius: 3px;
    }
    pre {
      background-color: #f1f1f1;
      padding: 10px;
      border-radius: 4px;
      overflow-x: auto;
    }
    .status {
      margin-top: 10px;
      font-style: italic;
    }
  </style>
</head>
<body>
  <header>
    <h1>EntityDB - Decentralized AI Memory</h1>
    <p>Storing Vector Embeddings In The Browser</p>
    <img src="entity-db/cover.gif" alt="EntityDB" id="headerImage">
  </header>

  <div class="tabs">
    <div class="tab active" onclick="openTab(event, 'demoTab')">Interactive Demo</div>
    <div class="tab" onclick="openTab(event, 'docsTab')">Documentation</div>
    <div class="tab" onclick="openTab(event, 'aboutTab')">About</div>
  </div>

  <div id="demoTab" class="tab-content active">
    <div class="container">
      <div class="panel action-panel">
        <h2>Add Content to Database</h2>
        <div>
          <label for="insertText">Text to embed:</label>
          <textarea id="insertText" rows="5" placeholder="Enter text to store in the database"></textarea>
        </div>
        <div>
          <button id="insertButton">Insert (Standard Vector)</button>
          <button id="insertBinaryButton">Insert (Binary Vector)</button>
          <p class="status" id="insertStatus"></p>
        </div>

        <h2>Search Database</h2>
        <div>
          <label for="queryText">Search query:</label>
          <textarea id="queryText" rows="3" placeholder="Enter text to search for similar content"></textarea>
        </div>
        <div>
          <button id="queryButton">Search (Cosine Similarity)</button>
          <button id="queryBinaryButton">Search (Binary JS)</button>
          <button id="queryBinarySIMDButton">Search (Binary SIMD)</button>
          <p class="status" id="queryStatus"></p>
        </div>
      </div>

      <div class="panel">
        <h2>Results</h2>
        <div class="results" id="results">
          <p>Results will appear here after a search.</p>
        </div>
      </div>
    </div>
  </div>

  <div id="docsTab" class="tab-content">
    <h2>How to Use EntityDB</h2>
    
    <h3>Installation</h3>
    <pre><code>npm install @babycommando/entity-db</code></pre>
    
    <h3>Basic Usage</h3>
    <pre><code>import { EntityDB } from "@babycommando/entity-db";

// Initialize the VectorDB instance
const db = new EntityDB({
  vectorPath: "db_name",
  model: "Xenova/all-MiniLM-L6-v2", // a HuggingFace embeddings model
});

// Insert data with automatic embedding generation
await db.insert({
  text: "This is a sample text to embed",
});

// Query the database
const results = await db.query("Find similar texts based on this query");
console.log(results);</code></pre>

    <h3>Working with Binary Vectors (Faster)</h3>
    <pre><code>// Insert data with binary embedding
await db.insertBinary({
  text: "This is a sample text to embed and binarize",
});

// Query using binary vectors (very fast)
const results = await db.queryBinary("Find similar texts");

// Query using SIMD acceleration (insanely fast)
const results = await db.queryBinarySIMD("Find similar texts");</code></pre>
  </div>

  <div id="aboutTab" class="tab-content">
    <h2>About EntityDB</h2>
    <p>EntityDB is a powerful, lightweight in-browser database designed for storing and querying vectors. It integrates seamlessly with IndexedDB for persistent storage and Transformers.js to generate embeddings from text, allowing you to build fast and efficient search systems with state-of-the-art models.</p>
    
    <h3>Features</h3>
    <ul>
      <li><strong>In-browser</strong>: Runs entirely in the browser using IndexedDB for local storage.</li>
      <li><strong>Seamless Integration with Transformers</strong>: Easily generate text embeddings with Hugging Face models via Transformers.js.</li>
      <li><strong>Cosine Similarity Search</strong>: Efficient querying based on cosine similarity between vectors.</li>
      <li><strong>Binary Vectors</strong>: Optional binarization for extremely fast hamming distance search.</li>
      <li><strong>SIMD Acceleration</strong>: WebAssembly SIMD implementation for maximum performance.</li>
      <li><strong>Flexible</strong>: Supports both automatic embedding generation and manual insertion of pre-computed embeddings.</li>
      <li><strong>Lightweight</strong>: No need for a server-side component or complex setup.</li>
    </ul>

    <h3>Example Applications</h3>
    <ul>
      <li>Semantic search engines</li>
      <li>AI chat applications with memory</li>
      <li>Recommendation systems</li>
      <li>Content similarity analysis</li>
      <li>Knowledge management tools</li>
    </ul>
  </div>

  <script type="module" src="script.js"></script>
  <script>
    function openTab(evt, tabName) {
      var i, tabcontent, tablinks;
      tabcontent = document.getElementsByClassName("tab-content");
      for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].className = tabcontent[i].className.replace(" active", "");
      }
      tablinks = document.getElementsByClassName("tab");
      for (i = 0; i < tablinks.length; i++) {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
      }
      document.getElementById(tabName).className += " active";
      evt.currentTarget.className += " active";
    }
  </script>
</body>
</html>